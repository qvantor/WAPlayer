{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 822a80ff7902ccf97fbd","webpack:///./src/index.js","webpack:///./src/visualization/index.js","webpack:///./src/visualization/default.js","webpack:///./src/visualization/circle.js"],"names":["Player","config","ctx","AudioContext","gain","createGain","analyser","createAnalyser","panner","createStereoPanner","paused","time","filters","forEach","filter","f","createBiquadFilter","type","frequency","value","Q","push","events","play","pause","timeChange","volume","seek","load","loaded","endFile","loading","_createSource","source","start","_interval","setInterval","_last","Date","duration","stop","_emit","clearInterval","vol","src","Promise","resolve","reject","_loadSoundFile","then","data","buffer","toFixed","catch","close","event","cb","length","fn","call","createBufferSource","connect","i","destination","url","context","xhr","XMLHttpRequest","open","responseType","onprogress","e","onload","decodeAudioData","response","decodedArrayBuffer","onerror","send","exports","Visualization","default","circle","fftSize","specification","parent","document","querySelector","selector","canvas","createElement","width","clientWidth","height","appendChild","canvasCtx","getContext","dataArray","Uint8Array","frequencyBinCount","destroyed","grd","createLinearGradient","gardient","item","addColorStop","hzPerNumber","sampleRate","startHz","Math","round","endHz","animation","getByteFrequencyData","clearRect","beginPath","moveTo","lineTo","fillStyle","fill","lineWidth","stroke","requestAnimationFrame","bind","removeChild","arc","PI","color"],"mappings":"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","file":"WAPlayer.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"WAPlayer\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"WAPlayer\"] = factory();\n\telse\n\t\troot[\"WAPlayer\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 822a80ff7902ccf97fbd\n **/","import {Visualization} from './visualization/';\n\nclass Player {\n    constructor(config) {\n        config = config || {};\n        this.ctx = new AudioContext();\n        this.gain = this.ctx.createGain();\n        this.analyser = this.ctx.createAnalyser();\n        this.panner = this.ctx.createStereoPanner();\n        this.paused = true;\n        this.time = 0;\n\n        if (config.filters) {\n            this.filters = [];\n            config.filters.forEach((filter) => {\n                let f = this.ctx.createBiquadFilter();\n\n                f.type = filter.type || 'peaking';\n                f.frequency.value = filter.frequency || 350;\n                f.gain.value = filter.gain || 0;\n                f.Q.value = filter.Q || 0;\n                this.filters.push(f);\n            });\n        }\n\n        this.events = {\n            play: [],\n            pause: [],\n            timeChange: [],\n            volume: [],\n            seek: [],\n            load: [],\n            loaded: [],\n            endFile: []\n        };\n    }\n\n    play() {\n        if (!this.paused || this.loading) return;\n\n        this._createSource();\n\n        this.paused = false;\n\n        if (this.time > 0) {\n            this.source.start(0, this.time);\n        } else {\n            this.source.start(0);\n        }\n\n        this._interval = setInterval(() => {\n            if (this._last) {\n                this.time = this.time + ((new Date() - this._last) / 1000);\n            }\n            this._last = new Date();\n            if (this.time >= this.duration) {\n                this.stop();\n                this._emit('endFile');\n            }\n            this._emit('timeChange', this.time);\n        }, 50);\n\n        this._emit('play');\n    }\n\n    pause() {\n        if (this.loading || this.paused) return;\n\n        this.paused = true;\n\n        this.source.stop(0);\n        this._last = null;\n        clearInterval(this._interval);\n        this._emit('pause');\n    }\n\n    stop() {\n        if (this.loading || this.paused) return;\n        this.paused = true;\n        this.time = 0;\n        this._last = null;\n        clearInterval(this._interval);\n        this.source.stop(0);\n        this._emit('pause');\n    }\n\n    toggle() {\n        this.paused ? this.play() : this.pause();\n    }\n\n    volume(vol) {\n        this.gain.gain.value = vol;\n        this._emit('volume', vol);\n    }\n\n    seek(time) {\n        if (this.loading) return;\n        if (time < 0) return;\n\n        this.time = time;\n\n        if (!this.paused) {\n            this.source.stop(0);\n            this._createSource();\n            this.source.start(0, this.time);\n        }\n        this._emit('timeChange', time);\n        this._emit('seek', time);\n    }\n\n    load(src) {\n        // @todo find way to cancel last one and make new one\n        return new Promise((resolve, reject) => {\n            if (this.loading) return reject(false);\n            if (this.source) {\n                clearInterval(this._interval);\n                this.source.stop(0);\n            }\n            this.loading = true;\n\n            this._loadSoundFile(src, this.ctx).then((data) => {\n                this.buffer = data;\n                this.duration = data.duration.toFixed(0);\n                this.time = 0;\n                this.paused = true;\n                this.loading = false;\n                this._createSource();\n                this._emit('loaded');\n                resolve(this);\n            }).catch(reject);\n        });\n    }\n\n    destroy() {\n        clearInterval(this._interval);\n        this.ctx.close();\n    }\n\n    on(event, cb) {\n        if (this.events[event] && typeof cb === 'function') {\n            this.events[event].push(cb);\n        }\n        return this;\n    }\n\n    _emit(event, data) {\n        if (this.events[event].length > 0) {\n            this.events[event].forEach((fn) => {\n                fn.call(this, data);\n            });\n        }\n    }\n\n    _createSource() {\n        this.source = this.ctx.createBufferSource();\n        this.source.connect(this.panner);\n        this.panner.connect(this.gain);\n\n        if (this.filters && this.filters.length > 0) {\n            for (let i = 0; i < this.filters.length; i++) {\n                if (i === 0) {\n                    this.gain.connect(this.filters[i]);\n                } else {\n                    this.filters[i - 1].connect(this.filters[i]);\n                }\n            }\n\n            this.filters[this.filters.length - 1].connect(this.analyser);\n            this.filters[this.filters.length - 1].connect(this.ctx.destination);\n        } else {\n            this.gain.connect(this.analyser);\n            this.gain.connect(this.ctx.destination);\n        }\n\n        this.source.buffer = this.buffer;\n    }\n\n    _loadSoundFile(url, context) {\n        return new Promise((resolve, reject) => {\n            let xhr = new XMLHttpRequest();\n\n            xhr.open('GET', url, true);\n            xhr.responseType = 'arraybuffer';\n            xhr.onprogress = (e) => {\n                this._emit('load', e);\n            };\n            xhr.onload = function (e) {\n                context.decodeAudioData(this.response,\n                    function (decodedArrayBuffer) {\n                        resolve(decodedArrayBuffer);\n                    }, function (e) {\n                        reject('Error decoding file', e);\n                    });\n            };\n            xhr.onerror = function (e) {\n                reject(e);\n            };\n            xhr.send();\n        });\n    }\n}\n\nexports.Player = Player;\nexports.Visualization = Visualization;\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/index.js\n **/","import {Visualization as _default} from './default';\nimport {Visualization as circle} from './circle';\n\nexport let Visualization = {\n    default: _default,\n    circle\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/visualization/index.js\n **/","export class Visualization {\n    constructor(analyser, config) {\n        this.analyser = analyser;\n        this.analyser.fftSize = config.specification || 2048;\n        this.parent = document.querySelector(config.selector);\n        this.canvas = document.createElement('canvas');\n        this.canvas.width = this.parent.clientWidth;\n        this.canvas.height = 255;\n        this.parent.appendChild(this.canvas);\n        this.canvasCtx = this.canvas.getContext('2d');\n        this.dataArray = new Uint8Array(this.analyser.frequencyBinCount);\n        this.destroyed = false;\n\n        this.grd = this.canvasCtx.createLinearGradient(0, 255, 0, 0);\n        config.gardient.forEach((item) => {\n            this.grd.addColorStop(item[0], item[1]);\n        });\n\n        this.hzPerNumber = this.analyser.context.sampleRate / this.analyser.fftSize;\n        this.startHz = Math.round(50 / this.hzPerNumber);\n        this.endHz = Math.round(20000 / this.hzPerNumber);\n        this.animation();\n    }\n\n    animation() {\n        this.canvas.width = this.parent.clientWidth;\n\n        let width = (this.canvas.clientWidth / this.dataArray.length) * 1.4;\n\n        this.analyser.getByteFrequencyData(this.dataArray);\n        this.canvasCtx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n        this.canvasCtx.beginPath();\n        this.canvasCtx.moveTo(0, 255);\n\n        for (let i = this.startHz; i < this.endHz; i++) {\n            this.canvasCtx.lineTo(i * width, 255 - this.dataArray[i]);\n        }\n\n        this.canvasCtx.lineTo(this.dataArray.length * width, 255);\n\n        this.canvasCtx.fillStyle = this.grd;\n        this.canvasCtx.fill();\n        this.canvasCtx.lineWidth = 0.001;\n        this.canvasCtx.stroke();\n\n        if (!this.destroyed) {\n            requestAnimationFrame(this.animation.bind(this));\n        }\n    }\n\n    destroy() {\n        this.destroyed = true;\n        this.parent.removeChild(this.canvas);\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/visualization/default.js\n **/","export class Visualization {\n    constructor(analyser, config) {\n        this.config = config;\n        this.parent = document.querySelector(config.selector);\n        this.canvas = document.createElement('canvas');\n        this.canvasCtx = this.canvas.getContext('2d');\n        this.canvas.width = this.parent.clientWidth;\n        this.canvas.height = 255;\n        this.parent.appendChild(this.canvas);\n        this.analyser = analyser;\n        this.analyser.fftSize = 32;\n        this.dataArray = new Uint8Array(this.analyser.frequencyBinCount);\n        this.destroyed = false;\n\n        this.animation();\n    }\n\n    animation() {\n        this.analyser.getByteFrequencyData(this.dataArray);\n        this.canvasCtx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n\n        for (let i = 0; i < this.dataArray.length; i++) {\n            this.canvasCtx.beginPath();\n            this.canvasCtx.arc(this.canvas.width / 2, 255 / 2, this.dataArray[i] / 2, 0, 2 * Math.PI, false);\n            this.canvasCtx.fillStyle = this.config.color || 'rgba(52, 152, 219,0.1)';\n            this.canvasCtx.fill();\n            this.canvasCtx.lineWidth = 0.001;\n            this.canvasCtx.stroke();\n        }\n\n        if (!this.destroyed) {\n            requestAnimationFrame(this.animation.bind(this));\n        }\n    }\n\n    destroy() {\n        this.destroyed = true;\n        this.parent.removeChild(this.canvas);\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/visualization/circle.js\n **/"],"sourceRoot":""}